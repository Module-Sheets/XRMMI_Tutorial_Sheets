<!DOCTYPE html>
<!-- saved from url=(0103)https://krpano.com/viewsource.html?releases/1.23/viewer/examples/3d-gaussian-splatting/shaders-demo.xml -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>krpano.com - View Source</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<meta http-equiv="x-ua-compatible" content="IE=edge">
	<style>
		body{-webkit-text-size-adjust:none;}
	</style>
	<link href="./krpano.com - View Source_files/prism.css" rel="stylesheet">
	<script src="./krpano.com - View Source_files/prism.js.download"></script><script src="chrome-extension://idnnbdplmphpflfnlkomgpfbpcgelopg/inpage.js" id="xverse-wallet-provider" data-is-priority="true"></script>
<link rel="stylesheet" href="chrome-extension://ihcjicgdanjaechkgeegckofjjedodee/app/content-style.css"></head>
<body>


<pre style="margin:0;padding:0;" id="code" class=" language-php"><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>krpano</span><span class="token punctuation">&gt;</span></span></span>
	
	<span class="token multiline-comment">&lt;!-- krpano 3D Gaussian Splatting - Shader Demo --&gt;</span>
	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splatspath<span class="token punctuation">"</span></span> <span class="token attr-name">val</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>'<a class="token url-link" href="https://krpano.com/examples/gsplats">https://krpano.com/examples/gsplats</a>'<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>contextmenu3d.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%VIEWER%/plugins/webvr.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%VIEWER%/plugins/iphone_fullscreen_swipe.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%VIEWER%/plugins/controls3d.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%VIEWER%/plugins/vr_and_anaglyph_buttons.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	
	<span class="token multiline-comment">&lt;!-- adjust the joypad position depending on the screen size to avoid overlapping UI --&gt;</span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>joypad<span class="token punctuation">"</span></span> <span class="token attr-name">oy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>link:stagewidth:stagewidth LT 560 ? -40 : 0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>joypad_levelcontrol<span class="token punctuation">"</span></span> <span class="token attr-name">oy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>link:stagewidth:stagewidth LT 560 ? -40 : 0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>

	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splattools.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>

	<span class="token multiline-comment">&lt;!-- perf opt: use a lower rendering resolution on hi-dpi mobile/tablet devices --&gt;</span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display</span> <span class="token attr-name">framebufferscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>calc:max(0.66,1.0 / device.pixelratio)<span class="token punctuation">"</span></span> <span class="token attr-name">devices</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mobile.or.tablet<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>webvr</span> <span class="token attr-name">postracking</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">webvr_foveationlevel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">fovtype</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>VFOV<span class="token punctuation">"</span></span> <span class="token attr-name">vfov</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display</span> <span class="token attr-name">depthbuffer</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">depthnear</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">depthfar</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1000000<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>startup<span class="token punctuation">"</span></span> <span class="token attr-name">autorun</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onstart<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>startscene <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token keyword">OR</span> <span class="token operator">!</span>scene<span class="token punctuation">[</span><span class="token function">get<span class="token punctuation">(</span></span>startscene<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">copy<span class="token punctuation">(</span></span>startscene<span class="token punctuation">,</span>scene<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">loadscene<span class="token punctuation">(</span></span><span class="token function">get<span class="token punctuation">(</span></span>startscene<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span></span>
	
	<span class="token operator">&lt;</span>style name<span class="token operator">=</span><span class="token string">"infolink"</span>
		type<span class="token operator">=</span><span class="token string">"text"</span>
		css<span class="token operator">=</span><span class="token string">"font-size:12px; font-style:italic; color:#FFFFFF;"</span>
		bg<span class="token operator">=</span><span class="token string">"false"</span>
		txtshadow<span class="token operator">=</span><span class="token string">"0 1 1 0, 1 0 1 0"</span>
		align<span class="token operator">=</span><span class="token string">"leftbottom"</span>
		zorder<span class="token operator">=</span><span class="token string">"10"</span>
		<span class="token operator">/</span><span class="token operator">&gt;</span>
		
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>%VIEWER%/plugins/combobox.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
	<span class="token operator">&lt;</span>combobox name<span class="token operator">=</span><span class="token string">"cbscenes"</span> design<span class="token operator">=</span><span class="token string">"splattools"</span> align<span class="token operator">=</span><span class="token string">"bottom"</span> x<span class="token punctuation">.</span>mobile<span class="token operator">=</span><span class="token string">"10"</span> y<span class="token operator">=</span><span class="token string">"26"</span>
		onloaded<span class="token operator">=</span><span class="token string">"forall(scene, s, addnameditem(get(s.name), (s.title ? s.title : s.name), ('loadscene('+s.name+',null,MERGE,BLEND(0.5))') )); selectitembyname(get(xml.scene));"</span>
		<span class="token operator">/</span><span class="token operator">&gt;</span>
	
	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scene</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>unveileffects<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Unveil Effects<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hlookat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">vlookat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">tx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">ty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">tz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">oz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">fov</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">vrfloorlevel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>160<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
			<span class="token operator">&lt;</span>splats
				url<span class="token operator">=</span><span class="token string">"%$splatspath%/central2_splat3_1_00.compressed_copyright.ply"</span>
				scale<span class="token operator">=</span><span class="token string">"0.62"</span>
				tx<span class="token operator">=</span><span class="token string">"233.2"</span> ty<span class="token operator">=</span><span class="token string">"183.7"</span> tz<span class="token operator">=</span><span class="token string">"145.1"</span>
				rx<span class="token operator">=</span><span class="token string">"0"</span> ry<span class="token operator">=</span><span class="token string">"64.3"</span> rz<span class="token operator">=</span><span class="token string">"0"</span>
				shader<span class="token operator">=</span><span class="token string">"get:data[splats_unveil_shader_default].content"</span>
				unveil_range<span class="token operator">=</span><span class="token string">"2500"</span>
				unveil_blendrange<span class="token operator">=</span><span class="token string">"200"</span>
				unveil_time<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">"3.0"</span>
				unveil_progress<span class="token operator">=</span><span class="token string">"0"</span>
				antialias<span class="token operator">=</span><span class="token string">"link:unveil_progress:mix(1.0,0.3,unveil_progress)"</span>
				onloaded<span class="token operator">=</span><span class="token string">"tween(unveil_progress,1,get(image.splats.unveil_time),smoother, layer[playbutton].text='Play'; );"</span>
				<span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span></span>
		
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>unveileffects<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">link</span><span class="token punctuation">:</span>window</span><span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>80<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>170<span class="token punctuation">"</span></span> <span class="token attr-name">zorder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
			<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">panel</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">link</span><span class="token punctuation">:</span>subtitle</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Unveil Effects<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token operator">&lt;</span>layer style<span class="token operator">=</span><span class="token string">"control"</span> 
					currenteffect<span class="token operator">=</span><span class="token string">""</span>
					template<span class="token operator">=</span><span class="token string">"Effect: [span style='color:#FFFF00;']{{currenteffect:replace(substr(currenteffect,20),'_',' ')}}[/span]"</span> 
					onloaded<span class="token operator">=</span><span class="token string">"build_effect_control();"</span>
					<span class="token operator">/</span><span class="token operator">&gt;</span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>build_effect_control<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
					onclick <span class="token operator">=</span> <span class="token string">'switch(currenteffect'</span><span class="token punctuation">;</span>
					<span class="token function">forall<span class="token punctuation">(</span></span>data<span class="token punctuation">,</span>d<span class="token punctuation">,</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">contains<span class="token punctuation">(</span></span>d<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token string">'splats_unveil_shader'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
							onclick <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">','</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
							<span class="token keyword">if</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>content <span class="token operator">==</span> image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>shader<span class="token punctuation">,</span> currenteffect <span class="token operator">=</span> d<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
					onclick <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">');'</span><span class="token punctuation">;</span>
					onclick <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'image.splats.shader = data[get(currenteffect)].content;'</span><span class="token punctuation">;</span>
					onclick <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'layer[playbutton].text = "Play"; image.splats.unveil_progress = 0; callwith(layer[playbutton], onclick() );'</span><span class="token punctuation">;</span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span></span>
					
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.unveil_range<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4000<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Range: {{image.splats.unveil_range:roundval(image.splats.unveil_range)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.unveil_blendrange<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Blendrange: {{image.splats.unveil_blendrange:roundval(image.splats.unveil_blendrange)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.unveil_time<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.1<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Duration: {{image.splats.unveil_time:roundval(image.splats.unveil_time,-1)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.unveil_progress<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Progress: {{image.splats.unveil_progress:roundval(image.splats.unveil_progress,-3)}}<span class="token punctuation">"</span></span> <span class="token attr-name">ondown</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stoptween(image.splats.unveil_progress); layer[playbutton].text<span class="token punctuation">=</span>'Play';<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>playbutton<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">control</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Pause<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>playbutton_onclick()<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>playbutton_onclick<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>text <span class="token operator">==</span> <span class="token string">'Pause'</span><span class="token punctuation">,</span>
						text <span class="token operator">=</span> <span class="token string">'Play'</span><span class="token punctuation">;</span>
						<span class="token function">stoptween<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>unveil_progress<span class="token punctuation">)</span><span class="token punctuation">;</span>
					  <span class="token punctuation">,</span>
						text <span class="token operator">=</span> <span class="token string">'Pause'</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>unveil_progress <span class="token constant">GT</span> <span class="token number">0.9</span><span class="token punctuation">,</span>
							image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>unveil_progress <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
						<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">tween<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>unveil_progress<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'distance(1,'</span><span class="token operator">+</span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>unveil_time<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>smoother<span class="token punctuation">,</span> 
							text <span class="token operator">=</span> <span class="token string">'Play'</span><span class="token punctuation">;</span>
						<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span></span>

			<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layer</span><span class="token punctuation">&gt;</span></span></span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layer</span><span class="token punctuation">&gt;</span></span></span>


		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_unveil_shader_default<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

			uniform float unveil_range<span class="token punctuation">;</span>
			uniform float unveil_blendrange<span class="token punctuation">;</span>
			uniform float unveil_progress<span class="token punctuation">;</span>
				
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// distance from the world/model center
</span>				float d <span class="token operator">=</span> <span class="token function">length<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// distance-based blend factor
</span>				float blend <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">-</span> unveil_progress <span class="token operator">*</span> <span class="token punctuation">(</span>unveil_range <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">/</span> unveil_blendrange<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// scale the splats, but not to zero
</span>				mx <span class="token operator">*</span><span class="token operator">=</span> <span class="token function">max<span class="token punctuation">(</span></span>blend<span class="token punctuation">,</span> <span class="token number">0.000001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_unveil_shader_with_light_effect<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

			uniform float unveil_range<span class="token punctuation">;</span>
			uniform float unveil_blendrange<span class="token punctuation">;</span>
			uniform float unveil_progress<span class="token punctuation">;</span>
				
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// distance from the world/model center
</span>				float d <span class="token operator">=</span> <span class="token function">length<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// distance-based blend factor
</span>				float blend <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">-</span> unveil_progress <span class="token operator">*</span> <span class="token punctuation">(</span>unveil_range <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">/</span> unveil_blendrange<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// scale the splats, but not to zero
</span>				mx <span class="token operator">*</span><span class="token operator">=</span> <span class="token function">max<span class="token punctuation">(</span></span>blend<span class="token punctuation">,</span> <span class="token number">0.000001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// add an light effect at the unveil edge
</span>				float effect <span class="token operator">=</span> <span class="token function">exp<span class="token punctuation">(</span></span><span class="token operator">-</span><span class="token function">pow<span class="token punctuation">(</span></span><span class="token function">abs<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">/</span> unveil_range<span class="token punctuation">)</span> <span class="token operator">-</span> unveil_progress<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				color<span class="token punctuation">.</span>rgb <span class="token operator">+</span><span class="token operator">=</span> effect <span class="token operator">*</span> <span class="token function">vec3<span class="token punctuation">(</span></span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">,</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_unveil_shader_with_rainbow_effect<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

			uniform float unveil_range<span class="token punctuation">;</span>
			uniform float unveil_blendrange<span class="token punctuation">;</span>
			uniform float unveil_progress<span class="token punctuation">;</span>
			
			vec3 hue2rgb <span class="token punctuation">(</span>float h<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				h <span class="token operator">=</span> <span class="token function">mod<span class="token punctuation">(</span></span>h<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				float r <span class="token operator">=</span> <span class="token function">abs<span class="token punctuation">(</span></span>h <span class="token operator">*</span> <span class="token number">6.0</span> <span class="token operator">-</span> <span class="token number">3.0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
				float g <span class="token operator">=</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token function">abs<span class="token punctuation">(</span></span>h <span class="token operator">*</span> <span class="token number">6.0</span> <span class="token operator">-</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				float b <span class="token operator">=</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token function">abs<span class="token punctuation">(</span></span>h <span class="token operator">*</span> <span class="token number">6.0</span> <span class="token operator">-</span> <span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token function">vec3<span class="token punctuation">(</span></span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
				
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// distance from the world/model center
</span>				float d <span class="token operator">=</span> <span class="token function">length<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// distance-based blend factor
</span>				float blend <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">-</span> unveil_progress <span class="token operator">*</span> <span class="token punctuation">(</span>unveil_range <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">/</span> unveil_blendrange<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// scale the splats, but not to zero
</span>				mx <span class="token operator">*</span><span class="token operator">=</span> <span class="token function">max<span class="token punctuation">(</span></span>blend<span class="token punctuation">,</span> <span class="token number">0.000001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// add an rainbow-light effect at the unveil edge
</span>				float effect <span class="token operator">=</span> <span class="token function">exp<span class="token punctuation">(</span></span><span class="token operator">-</span><span class="token function">pow<span class="token punctuation">(</span></span><span class="token function">abs<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">/</span> unveil_range<span class="token punctuation">)</span> <span class="token operator">-</span> unveil_progress<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				color<span class="token punctuation">.</span>rgb <span class="token operator">+</span><span class="token operator">=</span> effect <span class="token operator">*</span> <span class="token number">1.5</span> <span class="token operator">*</span> <span class="token function">hue2rgb<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">/</span> unveil_range<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_unveil_shader_dark_to_light<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

			uniform float unveil_range<span class="token punctuation">;</span>
			uniform float unveil_blendrange<span class="token punctuation">;</span>
			uniform float unveil_progress<span class="token punctuation">;</span>
				
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// distance from the world/model center
</span>				float d <span class="token operator">=</span> <span class="token function">length<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// distance-based blend factor
</span>				float blend <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">-</span> unveil_progress <span class="token operator">*</span> <span class="token punctuation">(</span>unveil_range <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">/</span> unveil_blendrange<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// blend from dark-grayscale
</span>				float y <span class="token operator">=</span> color<span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token number">0.299</span> <span class="token operator">+</span> color<span class="token punctuation">.</span>g <span class="token operator">*</span> <span class="token number">0.587</span> <span class="token operator">+</span> color<span class="token punctuation">.</span>b <span class="token operator">*</span> <span class="token number">0.114</span><span class="token punctuation">;</span> 
				color<span class="token punctuation">.</span>rgb <span class="token operator">=</span> <span class="token function">mix<span class="token punctuation">(</span></span><span class="token function">vec3<span class="token punctuation">(</span></span><span class="token number">0.3</span> <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> blend<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_unveil_shader_with_distortion<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

			uniform float unveil_range<span class="token punctuation">;</span>
			uniform float unveil_blendrange<span class="token punctuation">;</span>
			uniform float unveil_progress<span class="token punctuation">;</span>
			
			vec3 hue2rgb <span class="token punctuation">(</span>float h<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				h <span class="token operator">=</span> <span class="token function">mod<span class="token punctuation">(</span></span>h<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				float r <span class="token operator">=</span> <span class="token function">abs<span class="token punctuation">(</span></span>h <span class="token operator">*</span> <span class="token number">6.0</span> <span class="token operator">-</span> <span class="token number">3.0</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
				float g <span class="token operator">=</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token function">abs<span class="token punctuation">(</span></span>h <span class="token operator">*</span> <span class="token number">6.0</span> <span class="token operator">-</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				float b <span class="token operator">=</span> <span class="token number">2.0</span> <span class="token operator">-</span> <span class="token function">abs<span class="token punctuation">(</span></span>h <span class="token operator">*</span> <span class="token number">6.0</span> <span class="token operator">-</span> <span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token function">vec3<span class="token punctuation">(</span></span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
				
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// distance from the world/model center
</span>				float d <span class="token operator">=</span> <span class="token function">length<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>xyz<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// distance-based blend factor
</span>				float blend <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">-</span> unveil_progress <span class="token operator">*</span> <span class="token punctuation">(</span>unveil_range <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">+</span> unveil_blendrange<span class="token punctuation">)</span> <span class="token operator">/</span> unveil_blendrange<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// scale the splats, but not to zero
</span>				mx <span class="token operator">*</span><span class="token operator">=</span> <span class="token function">max<span class="token punctuation">(</span></span>blend<span class="token punctuation">,</span> <span class="token number">0.000001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// add an arbitrary distortion 
</span>				float effect <span class="token operator">=</span> <span class="token function">exp<span class="token punctuation">(</span></span><span class="token operator">-</span><span class="token function">pow<span class="token punctuation">(</span></span><span class="token function">abs<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">/</span> unveil_range<span class="token punctuation">)</span> <span class="token operator">-</span> unveil_progress<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				pos<span class="token punctuation">.</span>xyz <span class="token operator">+</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">100.0</span> <span class="token operator">*</span> effect <span class="token operator">*</span> <span class="token function">normalize<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>zxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">infolink</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Model provided by [a href<span class="token punctuation">=</span>'<a class="token url-link" href="https://www.360images.fr/">https://www.360images.fr/</a>' target<span class="token punctuation">=</span>'_blank']360images.fr[/a]<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scene</span><span class="token punctuation">&gt;</span></span></span>
	
	
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scene</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lighteffects<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Light Effects<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hlookat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">vlookat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">tx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">ty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">tz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">oz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">fov</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">vrfloorlevel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>160<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
			<span class="token operator">&lt;</span>splats
				url<span class="token operator">=</span><span class="token string">"%$splatspath%/central2_splat3_1_00.compressed_copyright.ply"</span>
				scale<span class="token operator">=</span><span class="token string">"0.62"</span>
				tx<span class="token operator">=</span><span class="token string">"233.2"</span> ty<span class="token operator">=</span><span class="token string">"183.7"</span> tz<span class="token operator">=</span><span class="token string">"145.1"</span>
				rx<span class="token operator">=</span><span class="token string">"0"</span> ry<span class="token operator">=</span><span class="token string">"64.3"</span> rz<span class="token operator">=</span><span class="token string">"0"</span>
				shader<span class="token operator">=</span><span class="token string">"get:data[splats_light_effect].content"</span>
				light_x<span class="token operator">=</span><span class="token string">"link:view.tx"</span>
				light_y<span class="token operator">=</span><span class="token string">"link:view.ty"</span>
				light_z<span class="token operator">=</span><span class="token string">"link:view.tz"</span>
				light_range<span class="token operator">=</span><span class="token string">"250"</span>
				light_falloff<span class="token operator">=</span><span class="token string">"50"</span>
				light_darklevel<span class="token operator">=</span><span class="token string">"0.3"</span>
				<span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_light_effect<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

			uniform float light_x<span class="token punctuation">,</span> light_y<span class="token punctuation">,</span> light_z<span class="token punctuation">;</span>
			uniform float light_range<span class="token punctuation">;</span>
			uniform float light_falloff<span class="token punctuation">;</span>
			uniform float light_darklevel<span class="token punctuation">;</span>
				
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// distance splat to the light
</span>				float d <span class="token operator">=</span> <span class="token function">length<span class="token punctuation">(</span></span>pos<span class="token punctuation">.</span>xyz <span class="token operator">-</span> <span class="token function">vec3<span class="token punctuation">(</span></span>light_x<span class="token punctuation">,</span> light_y<span class="token punctuation">,</span> light_z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// fadeout factor
</span>				float fadeout <span class="token operator">=</span> <span class="token function">clamp<span class="token punctuation">(</span></span><span class="token punctuation">(</span>d <span class="token operator">-</span> light_range<span class="token punctuation">)</span> <span class="token operator">/</span> light_falloff<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// blend from dark-grayscale
</span>				float y <span class="token operator">=</span> color<span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token number">0.299</span> <span class="token operator">+</span> color<span class="token punctuation">.</span>g <span class="token operator">*</span> <span class="token number">0.587</span> <span class="token operator">+</span> color<span class="token punctuation">.</span>b <span class="token operator">*</span> <span class="token number">0.114</span><span class="token punctuation">;</span> 
				color<span class="token punctuation">.</span>rgb <span class="token operator">=</span> <span class="token function">mix<span class="token punctuation">(</span></span>color<span class="token punctuation">.</span>rgb<span class="token punctuation">,</span> <span class="token function">vec3<span class="token punctuation">(</span></span>light_darklevel <span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> fadeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lightfollow<span class="token punctuation">"</span></span> <span class="token attr-name">val</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lighteffects<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">link</span><span class="token punctuation">:</span>window</span><span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>80<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>170<span class="token punctuation">"</span></span> <span class="token attr-name">zorder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
			<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">panel</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">link</span><span class="token punctuation">:</span>subtitle</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Light Effects<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">control</span><span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Follow: {{lightfollow}}<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switch(lightfollow); setlightfollow( get(lightfollow) );<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>setlightfollow<span class="token punctuation">"</span></span> <span class="token attr-name">args</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>setfollow<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>local<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>setfollow<span class="token punctuation">,</span>
						lightfollow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 
						<span class="token function">link<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>light_x<span class="token punctuation">,</span> view<span class="token punctuation">.</span>tx<span class="token punctuation">)</span><span class="token punctuation">;</span> 
						<span class="token function">link<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>light_y<span class="token punctuation">,</span> view<span class="token punctuation">.</span>ty<span class="token punctuation">)</span><span class="token punctuation">;</span> 
						<span class="token function">link<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>light_z<span class="token punctuation">,</span> view<span class="token punctuation">.</span>tz<span class="token punctuation">)</span><span class="token punctuation">;</span>
					  <span class="token punctuation">,</span>
						lightfollow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
						<span class="token function">unlink<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>light_x<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">unlink<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>light_y<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">unlink<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>light_z<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span></span>
					
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.light_x<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X: {{image.splats.light_x:roundval(image.splats.light_x,1)}}<span class="token punctuation">"</span></span> <span class="token attr-name">ondown</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>setlightfollow(false);<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.light_y<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Y: {{image.splats.light_y:roundval(image.splats.light_y,1)}}<span class="token punctuation">"</span></span> <span class="token attr-name">ondown</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>setlightfollow(false);<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.light_z<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.5<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Z: {{image.splats.light_z:roundval(image.splats.light_z,1)}}<span class="token punctuation">"</span></span> <span class="token attr-name">ondown</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>setlightfollow(false);<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.light_range<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Range: {{image.splats.light_range:roundval(image.splats.light_range)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.light_falloff<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Falloff: {{image.splats.light_falloff:roundval(image.splats.light_falloff)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.light_darklevel<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.3<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Darklevel: {{image.splats.light_darklevel:roundval(image.splats.light_darklevel,-2)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
			<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layer</span><span class="token punctuation">&gt;</span></span></span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layer</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">infolink</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Model provided by [a href<span class="token punctuation">=</span>'<a class="token url-link" href="https://www.360images.fr/">https://www.360images.fr/</a>' target<span class="token punctuation">=</span>'_blank']360images.fr[/a]<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scene</span><span class="token punctuation">&gt;</span></span></span>
	
	<span class="token multiline-comment">&lt;!-- if="0" =&gt; skip this example, the color shader is now integrated in the splattools.xml --&gt;</span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scene</span> <span class="token attr-name">if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rgb_cube<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Adjust (RGB Cube)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
			
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>control</span> <span class="token attr-name">dollydistance</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hlookat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>45<span class="token punctuation">"</span></span> <span class="token attr-name">vlookat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>33<span class="token punctuation">"</span></span> <span class="token attr-name">tx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">ty</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">tz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">oz</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1100<span class="token punctuation">"</span></span> <span class="token attr-name">fov</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span><span class="token punctuation">&gt;</span></span></span>
			<span class="token operator">&lt;</span>splats 
				url<span class="token operator">=</span><span class="token string">"rgb_cube.splat"</span>
				shader<span class="token operator">=</span><span class="token string">"get:data[splats_adjust_shader].content"</span>
				brightness<span class="token operator">=</span><span class="token string">"0.0"</span>
				contrast<span class="token operator">=</span><span class="token string">"1.0"</span>
				gamma<span class="token operator">=</span><span class="token string">"1.0"</span>
				blacklevel<span class="token operator">=</span><span class="token string">"0.0"</span>
				whitelevel<span class="token operator">=</span><span class="token string">"1.0"</span>
				saturate<span class="token operator">=</span><span class="token string">"1.0"</span>
				vibrance<span class="token operator">=</span><span class="token string">"0.0"</span>
				intensity<span class="token operator">=</span><span class="token string">"1.0"</span>
				temp<span class="token operator">=</span><span class="token string">"0.0"</span>
				tint<span class="token operator">=</span><span class="token string">"0.0"</span>
				alpha<span class="token operator">=</span><span class="token string">"1.0"</span>
				splatscalex<span class="token operator">=</span><span class="token string">"1.0"</span>
				splatscaley<span class="token operator">=</span><span class="token string">"1.0"</span>
				splatscalez<span class="token operator">=</span><span class="token string">"1.0"</span>
				<span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splats_adjust_shader<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>
			
			uniform float splatscalex<span class="token punctuation">,</span> splatscaley<span class="token punctuation">,</span> splatscalez<span class="token punctuation">;</span>
			uniform float brightness<span class="token punctuation">,</span> contrast<span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> blacklevel<span class="token punctuation">,</span> whitelevel<span class="token punctuation">,</span> saturate<span class="token punctuation">,</span> vibrance<span class="token punctuation">,</span> intensity<span class="token punctuation">;</span>
			uniform float temp<span class="token punctuation">,</span> tint<span class="token punctuation">;</span>
			uniform float alpha<span class="token punctuation">;</span>
			
		<span class="token comment" spellcheck="true">	// CYT colorspace (by krpano): colortemperature(x) / luminance(y) / tint(z) 
</span>		<span class="token comment" spellcheck="true">	// - a rotated and scaled YUV colorspace: YUV =&gt; UYV + rotated and scaled UV:
</span>		<span class="token comment" spellcheck="true">	//   - the U(x) axis is for colortemperature changes
</span>		<span class="token comment" spellcheck="true">	//   - the Y(y) axis is for luminance changes
</span>		<span class="token comment" spellcheck="true">	//   - the V(z) axis is for tint changes
</span>		<span class="token comment" spellcheck="true">	// - note: the tint axis is scaled 0.5x of the colortemperature axis
</span>			<span class="token keyword">const</span> mat3 rgb2cyt <span class="token operator">=</span> <span class="token function">mat3<span class="token punctuation">(</span></span><span class="token number">2.295031</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.745666</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.549365</span><span class="token punctuation">,</span> <span class="token number">0.299</span><span class="token punctuation">,</span> <span class="token number">0.587</span><span class="token punctuation">,</span> <span class="token number">0.114</span><span class="token punctuation">,</span> <span class="token number">2.614040</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4.702415</span><span class="token punctuation">,</span> <span class="token number">2.088374</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> mat3 cyt2rgb <span class="token operator">=</span> <span class="token function">mat3<span class="token punctuation">(</span></span><span class="token number">0.199272</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.093252</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.036937</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.082049</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.332435</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.177597</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> mat3 skintones <span class="token operator">=</span> <span class="token function">mat3<span class="token punctuation">(</span></span><span class="token number">1.76777</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3.53553</span><span class="token punctuation">,</span> <span class="token number">0.02298</span><span class="token punctuation">,</span> <span class="token number">1.76777</span><span class="token punctuation">,</span> <span class="token number">3.53553</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2.19026</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
			void splatshader <span class="token punctuation">(</span>inout vec4 pos<span class="token punctuation">,</span> inout mat3 mx<span class="token punctuation">,</span> inout vec4 color<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// convert to CYT colorspace: x=colortemperature, y=luminance, z=tint
</span>				vec3 c <span class="token operator">=</span> color<span class="token punctuation">.</span>rgb <span class="token operator">*</span> rgb2cyt<span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// adjust luminance
</span>				c<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> brightness<span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> contrast <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token function">pow<span class="token punctuation">(</span></span>c<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">/</span> gamma<span class="token punctuation">)</span><span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> blacklevel <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> c<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> c<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>whitelevel <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> c<span class="token punctuation">.</span>y<span class="token operator">*</span>c<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>y <span class="token operator">*</span><span class="token operator">=</span> intensity<span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// adjust colors
</span>				c<span class="token punctuation">.</span>xz <span class="token operator">*</span><span class="token operator">=</span> <span class="token function">max<span class="token punctuation">(</span></span><span class="token number">0.0</span><span class="token punctuation">,</span> saturate <span class="token operator">+</span> vibrance <span class="token operator">*</span> <span class="token function">smoothstep<span class="token punctuation">(</span></span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">,</span> <span class="token function">length<span class="token punctuation">(</span></span><span class="token function">vec3<span class="token punctuation">(</span></span>c<span class="token punctuation">.</span>xz<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> skintones<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">smoothstep<span class="token punctuation">(</span></span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">length<span class="token punctuation">(</span></span>c<span class="token punctuation">.</span>xz <span class="token operator">*</span> <span class="token function">vec2<span class="token punctuation">(</span></span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> temp<span class="token punctuation">;</span>
				c<span class="token punctuation">.</span>z <span class="token operator">+</span><span class="token operator">=</span> tint<span class="token punctuation">;</span>
			
			<span class="token comment" spellcheck="true">	// convert back to RGB, and avoid negative color values (important for some GPUs)
</span>				color<span class="token punctuation">.</span>rgb <span class="token operator">=</span> <span class="token function">max<span class="token punctuation">(</span></span>c <span class="token operator">*</span> cyt2rgb<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment" spellcheck="true">	// adjust alpha/transparency 
</span>				color<span class="token punctuation">.</span>a <span class="token operator">*</span><span class="token operator">=</span> alpha<span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// adjust scale
</span>				mx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> splatscalex<span class="token punctuation">;</span>
				mx<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> splatscaley<span class="token punctuation">;</span>
				mx<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> splatscalez<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>data</span><span class="token punctuation">&gt;</span></span></span>
		
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">link</span><span class="token punctuation">:</span>window</span><span class="token punctuation">"</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>80<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>170<span class="token punctuation">"</span></span> <span class="token attr-name">zorder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
			<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">panel</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">link</span><span class="token punctuation">:</span>subtitle</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Adjust Splats<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switch(image.splats.shader, '', get(data[splats_adjust_shader].content)); switch(bgcolor, get(splattools.accentcolor), get(splattools.bgcolor_button_ondown));<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.brightness<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Brightness: {{image.splats.brightness:roundval(image.splats.brightness,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.contrast<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Contrast: {{image.splats.contrast:roundval(image.splats.contrast,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.gamma<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Gamma: {{image.splats.gamma:roundval(image.splats.gamma,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.blacklevel<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blacklevel: {{image.splats.blacklevel:roundval(image.splats.blacklevel,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.whitelevel<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>whitelevel: {{image.splats.whitelevel:roundval(image.splats.whitelevel,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.intensity<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Intensity: {{image.splats.intensity:roundval(image.splats.intensity,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.saturate<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Saturate: {{image.splats.saturate:roundval(image.splats.saturate,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.vibrance<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-2.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>+2.0<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Vibrance: {{image.splats.vibrance:roundval(image.splats.vibrance,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.temp<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>+1<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Temperature: {{image.splats.temp:(image.splats.temp GT 0 ? '+' : '') + roundval(image.splats.temp,-2)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.tint<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>+1<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Tint: {{image.splats.tint:(image.splats.tint GT 0 ? '+' : '') + roundval(image.splats.tint,-2)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.alpha<span class="token punctuation">"</span></span> <span class="token attr-name">dragscale</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.002<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Alpha: {{image.splats.alpha:roundval(image.splats.alpha,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.splatscalex<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Scale X: {{image.splats.splatscalex:roundval(image.splats.splatscalex,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.splatscaley<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Scale Y: {{image.splats.splatscaley:roundval(image.splats.splatscaley,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">dragcontrol</span><span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.splats.splatscalez<span class="token punctuation">"</span></span> <span class="token attr-name">valuemin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.01<span class="token punctuation">"</span></span> <span class="token attr-name">valuemax</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">valuereset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">template</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Scale Z: {{image.splats.splatscalez:roundval(image.splats.splatscalez,-3)}}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layer</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>testmodel<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value">control</span><span class="token punctuation">"</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Model: RGB Cube<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switch_testmodel();<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></span>
				
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>switch_testmodel<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>local<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span>
					<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">contains<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'rgb_cube'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						caller<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'Model: Centrale 2'</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'%$splatspath%/central2_splat3_1_00.compressed_copyright.ply'</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> rx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ry<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> rz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">loadpanoimage<span class="token punctuation">(</span></span><span class="token constant">KEEPALL</span><span class="token punctuation">,</span> <span class="token function">BLEND<span class="token punctuation">(</span></span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>view<span class="token punctuation">,</span> vlookat<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">283</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token operator">-</span><span class="token number">217</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token operator">-</span><span class="token number">384</span><span class="token punctuation">,</span> oz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fov<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					  <span class="token punctuation">,</span><span class="token function">contains<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'central2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						caller<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'Model: Eglise Chenille'</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'%$splatspath%/eglise_chenille_3840_4000_210.compressed.ply'</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token number">160</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> rx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ry<span class="token operator">=</span><span class="token operator">-</span><span class="token number">92.7</span><span class="token punctuation">,</span> rz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">loadpanoimage<span class="token punctuation">(</span></span><span class="token constant">KEEPALL</span><span class="token punctuation">,</span> <span class="token function">BLEND<span class="token punctuation">(</span></span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>view<span class="token punctuation">,</span> vlookat<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token operator">-</span><span class="token number">170</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> oz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fov<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					  <span class="token punctuation">,</span><span class="token function">contains<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">'eglise'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						caller<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'Model: Garden'</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'%$splatspath%/garden.compressed.ply'</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token operator">-</span><span class="token number">87</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">177.5</span><span class="token punctuation">,</span> rx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ry<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span> rz<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">loadpanoimage<span class="token punctuation">(</span></span><span class="token constant">KEEPALL</span><span class="token punctuation">,</span> <span class="token function">BLEND<span class="token punctuation">(</span></span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>view<span class="token punctuation">,</span> vlookat<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token operator">-</span><span class="token number">170</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> oz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fov<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					  <span class="token punctuation">,</span>
						caller<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'Model: RGB Cube'</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span>copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
						image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'%CURRENTXML%/rgb_cube.splat'</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>image<span class="token punctuation">.</span>splats<span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> rx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ry<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> rz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">loadpanoimage<span class="token punctuation">(</span></span><span class="token constant">KEEPALL</span><span class="token punctuation">,</span> <span class="token function">BLEND<span class="token punctuation">(</span></span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token function">set<span class="token punctuation">(</span></span>view<span class="token punctuation">,</span> vlookat<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">,</span> tx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> ty<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> tz<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> oz<span class="token operator">=</span><span class="token number">1100</span><span class="token punctuation">,</span> fov<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span></span>
			<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layer</span><span class="token punctuation">&gt;</span></span></span>
		<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layer</span><span class="token punctuation">&gt;</span></span></span>

	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scene</span><span class="token punctuation">&gt;</span></span></span>


	<span class="token operator">&lt;</span>layer name<span class="token operator">=</span><span class="token string">"introtext"</span> keep<span class="token operator">=</span><span class="token string">"true"</span>
		type<span class="token operator">=</span><span class="token string">"text"</span>
		text<span class="token operator">=</span><span class="token string">"krpano 3D Gaussian Splatting[br]Shader Demo"</span>
		align<span class="token operator">=</span><span class="token string">"center"</span>
		enabled<span class="token operator">=</span><span class="token string">"false"</span>
		bg<span class="token operator">=</span><span class="token string">"false"</span>
		width<span class="token operator">=</span><span class="token string">"90%"</span>
		css<span class="token operator">=</span><span class="token string">"color:white; font-size:30px; font-weight:bold; text-align:center;"</span>
		txtshadow<span class="token operator">=</span><span class="token string">"2 4 2 0x000000 1, 4 10 20 0x000000 1"</span>
		alpha<span class="token operator">=</span><span class="token string">"0"</span>
		onloaded<span class="token operator">=</span><span class="token string">"tween(alpha, 1.0, 1.0); delayedcall(3.0, tween(alpha,0,1.0,remove()));"</span>
		<span class="token operator">/</span><span class="token operator">&gt;</span>
		
	
	
	<span class="token multiline-comment">&lt;!-- file-drop support - a little tool for quickly testing own splat models --&gt;</span>
	<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>splatexamples_drop_in_support<span class="token punctuation">"</span></span> <span class="token attr-name">autorun</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onstart<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token constant">CDATA</span><span class="token punctuation">[</span>

		<span class="token keyword">function</span> <span class="token function">preventDefault<span class="token punctuation">(</span></span>e<span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">"dragover"</span><span class="token punctuation">)</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>dropEffect <span class="token operator">=</span> <span class="token string">"copy"</span><span class="token punctuation">;</span>
			e<span class="token punctuation">.</span><span class="token function">preventDefault<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			e<span class="token punctuation">.</span><span class="token function">stopPropagation<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">function</span> <span class="token function">enable_drop_in_support<span class="token punctuation">(</span></span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			document<span class="token punctuation">.</span><span class="token function">addEventListener<span class="token punctuation">(</span></span><span class="token string">"dragenter"</span><span class="token punctuation">,</span> preventDefault<span class="token punctuation">)</span><span class="token punctuation">;</span>
			document<span class="token punctuation">.</span><span class="token function">addEventListener<span class="token punctuation">(</span></span><span class="token string">"dragover"</span><span class="token punctuation">,</span> preventDefault<span class="token punctuation">)</span><span class="token punctuation">;</span>
			document<span class="token punctuation">.</span><span class="token function">addEventListener<span class="token punctuation">(</span></span><span class="token string">"dragleave"</span><span class="token punctuation">,</span> preventDefault<span class="token punctuation">)</span><span class="token punctuation">;</span>

			document<span class="token punctuation">.</span><span class="token function">addEventListener<span class="token punctuation">(</span></span><span class="token string">"drop"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				<span class="token function">preventDefault<span class="token punctuation">(</span></span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">var</span> file <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">)</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				
				<span class="token keyword">var</span> urlinfo <span class="token operator">=</span> krpano<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">spliturl<span class="token punctuation">(</span></span>file<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment" spellcheck="true">	// only .splat and .ply files are supported
</span>				<span class="token keyword">var</span> fileext <span class="token operator">=</span> urlinfo<span class="token punctuation">.</span>ext<span class="token punctuation">.</span><span class="token function">toLowerCase<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>fileext <span class="token operator">!</span><span class="token operator">=</span> <span class="token string">"splat"</span> <span class="token operator">&amp;&amp;</span> fileext <span class="token operator">!</span><span class="token operator">=</span> <span class="token string">"ply"</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// create a URL object
</span>				<span class="token keyword">var</span> fileURL <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL<span class="token punctuation">(</span></span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment" spellcheck="true">	// krpano will take the text after the '#' as filename for blob-urls
</span>				<span class="token keyword">var</span> bloburl_with_filename <span class="token operator">=</span> fileURL <span class="token operator">+</span> <span class="token string">"#"</span> <span class="token operator">+</span> file<span class="token punctuation">.</span>name<span class="token punctuation">;</span>

			<span class="token comment" spellcheck="true">	// load the dropped splat model
</span>				krpano<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span><span class="token string">'copy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				krpano<span class="token punctuation">.</span>image<span class="token punctuation">.</span>splats<span class="token punctuation">.</span>url <span class="token operator">=</span> bloburl_with_filename<span class="token punctuation">;</span>
				krpano<span class="token punctuation">.</span>actions<span class="token punctuation">.</span><span class="token function">loadpanoimage<span class="token punctuation">(</span></span><span class="token string">'KEEPALL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token comment" spellcheck="true">	// reset the view
</span>				krpano<span class="token punctuation">.</span>view<span class="token punctuation">.</span><span class="token function">reset<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment" spellcheck="true">	// remove the URL object when leaving the pano
</span>				krpano<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">addListener<span class="token punctuation">(</span></span><span class="token string">"onremovepano|once"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">{</span>
					<span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL<span class="token punctuation">(</span></span>fileURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token function">enable_drop_in_support<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span></span>

<span class="token markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>krpano</span><span class="token punctuation">&gt;</span></span></span></pre>

<script>
	
	var q = document.location;
	q = q.search || q.hash;
	if(q && q.charAt(0) == "?")
	{
		var url =  q.slice(1);
		var stripped = url;
		var ext = "";

		var pi = stripped.indexOf("?");
		if (pi > 0) stripped = stripped.slice(0,pi);
		pi = stripped.indexOf("#");
		if (pi > 0) stripped = stripped.slice(0,pi);
		pi = stripped.lastIndexOf(".");
		if (pi > 0) ext = (""+stripped.slice(pi+1)).toLowerCase();
		
		var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function(){ if(xhr.readyState === 4) { if (xhr.status === 200) { loaded(xhr.responseText, ext); } else { loaded("loading '"+url+"' failed", "err"); }} };
		xhr.open("GET", url, true);
		xhr.send(null);
	}
	else
	{
		loaded("no file specified", "err");
	}

	
	function loaded(filecontent, ext)
	{
		var codetype = "markup";
		
		switch(ext)
		{
			case "js":  codetype = "javascript"; break;
			case "as":  codetype = "actionscript"; break;
			case "xml": codetype = "php"; break;
			case "err": codetype = "clike"; filecontent = "ERROR: "+filecontent+"!"; break;
		}
		
		var code = document.getElementById("code");
		
		code.textContent = filecontent;
		
		//var t1 = (new Date()).getTime();
		
		code.className = "language-" + codetype;
		Prism.highlightElement(code);
		
		//var t2 = (new Date()).getTime();
		//console.log("time for syntax highlighting: "+(t2-t1)+"ms");
	}
</script>



</body></html>